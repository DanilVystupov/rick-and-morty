import{n as $,r as S,H as y,g as b,o as l,c as _,a as n,F as m,x as A,J as k,t as f,K as P,L as N,M as E,p as Q,e as T,_ as g,N as V,O,v as B,P as U,b as p,w as M,s as D,d as F,z as j,A as q}from"./entry.8b140191.js";import{u as w}from"./characterStore.abd10271.js";import{_ as H}from"./nuxt-link.0ccc1ef4.js";const J=e=>(Q("data-v-e552eceb"),e=e(),T(),e),K=J(()=>n("div",{class:"pagination__title"},"Страницы:",-1)),R={class:"pagination__list"},G=["onClick"],W=["onClick"],X=["onClick"],Y=$({__name:"PaginationCharacters",setup(e){const a=w(),t=S(1),o=S("..."),s=y(()=>a.totalPages),c=S(!1),i=y(()=>{const u=s.value;return u<=3?Array.from({length:u},(C,d)=>d+1):[1,2,3]}),v=y(()=>{const u=s.value,C=Array.from({length:u},(d,L)=>L+1);return u<=3?[]:C.slice(3,u)});function r(){c.value=!c.value}function h(){c.value=!1}function I(u){t.value=u,h()}function z(u){I(u),h()}return b(t,u=>{u>=1&&u<=3?o.value="...":o.value=String(u),a.fetchCharacters(u)}),(u,C)=>(l(),_("div",{class:"pagination",onClick:h},[K,n("ul",R,[(l(!0),_(m,null,A(i.value,d=>(l(),_("li",{key:d},[n("button",{onClick:L=>I(d),class:k([{"pagination__button--active":t.value===d},"pagination__button"])},f(d),11,G)]))),128)),n("li",{class:k([{"pagination__item--active":c.value},"pagination__item"])},[n("button",{onClick:P(r,["stop"]),class:"pagination__button"},f(c.value?"▲":`${o.value}`),9,W),N(n("ul",{class:"pagination__dropdown",onClick:C[0]||(C[0]=P(()=>{},["stop"]))},[(l(!0),_(m,null,A(v.value,d=>(l(),_("li",{key:d,class:"pagination__dropdown-item"},[n("button",{onClick:L=>z(d),class:k([{"pagination__button--active":t.value===d},"pagination__button"])},f(d),11,X)]))),128))],512),[[E,c.value]])],2)])]))}});const Z=g(Y,[["__scopeId","data-v-e552eceb"]]),tt=["onSubmit"],et=$({__name:"SearchCharacters",setup(e){const a=w(),t=S(""),o=S("all");let s=null;V(()=>{const r=localStorage.getItem("searchQuery"),h=localStorage.getItem("selectedStatus");r&&(t.value=r),h&&(o.value=h),a.fetchCharactersBySearchAndStatus(t.value,o.value)}),b(t,r=>{localStorage.setItem("searchQuery",r),a.fetchCharactersBySearchAndStatus(r,o.value)}),b(o,r=>{localStorage.setItem("selectedStatus",r),a.fetchCharactersBySearchAndStatus(t.value,r)});const c=()=>{s!==null&&clearTimeout(s),s=setTimeout(()=>{a.fetchCharactersBySearchAndStatus(t.value,o.value)},500)},i=r=>{r.preventDefault(),a.fetchCharactersBySearchAndStatus(t.value,o.value)},v=()=>{t.value="",a.fetchCharacters(),s!==null&&clearTimeout(s)};return(r,h)=>(l(),_("form",{onSubmit:P(i,["prevent"]),class:"search-bar"},[N(n("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=I=>t.value=I),placeholder:"Введите имя персонажа...",class:"search-input",onInput:c},null,544),[[O,t.value]]),t.value?(l(),_("span",{key:0,class:"clear-input",onClick:v}," ⮾ ")):B("",!0)],40,tt))}});const at=g(et,[["__scopeId","data-v-3df545f3"]]),x=e=>(Q("data-v-e8e64788"),e=e(),T(),e),st={class:"sort-select"},nt=x(()=>n("label",{for:"status-select"},"Фильтровать по статусу:",-1)),ot=x(()=>n("option",{value:"all"},"All",-1)),ct=x(()=>n("option",{value:"Alive"},"Alive",-1)),rt=x(()=>n("option",{value:"Dead"},"Dead",-1)),lt=x(()=>n("option",{value:"unknown"},"unknown",-1)),_t=[ot,ct,rt,lt],ut=$({__name:"SortCharactersStatus",setup(e){const a=w(),t=S("all"),o=s=>{t.value=s,a.fetchCharactersBySearchAndStatus(a.searchQuery,s)};return V(()=>{const s=localStorage.getItem("selectedStatus");s&&(t.value=s,a.fetchCharactersBySearchAndStatus(a.searchQuery,s))}),b(t,s=>{localStorage.setItem("selectedStatus",s)}),(s,c)=>(l(),_("div",st,[nt,N(n("select",{id:"status-select","onUpdate:modelValue":c[0]||(c[0]=i=>t.value=i),onChange:c[1]||(c[1]=i=>o(t.value))},_t,544),[[U,t.value]])]))}});const it=g(ut,[["__scopeId","data-v-e8e64788"]]),dt={};function ht(e,a){const t=Z,o=at,s=it;return l(),_(m,null,[p(t),p(o),p(s)],64)}const pt=g(dt,[["render",ht]]),vt=e=>(Q("data-v-1ab16a0d"),e=e(),T(),e),mt={class:"card-image"},ft=["src"],St={class:"card-content"},gt={class:"episode-list"},Ct=vt(()=>n("h3",null,"Список эпизодов с участием:",-1)),yt=$({__name:"CharacterItem",props:{character:{type:Object,required:!0,default:()=>{}}},setup(e){const a=e,t=c=>{const i=c.split("/");return i[i.length-1]},o=y(()=>{const c=a.character.status;return{Dead:"status-dead",Alive:"status-alive",unknown:"status-unknown"}[c]||"status-default"}),s=()=>{localStorage.removeItem("searchQuery"),localStorage.removeItem("selectedStatus")};return(c,i)=>{const v=H;return l(),_(m,null,[p(v,{to:`/character/${e.character.id}`,onClick:s},{default:M(()=>[n("div",mt,[n("img",{class:"card-image__item",src:e.character.image,alt:"image character"},null,8,ft),n("span",{class:k(D(o))},f(e.character.status),3)])]),_:1},8,["to"]),n("div",St,[n("h2",null,f(e.character.name)+" ("+f(e.character.species)+")",1),n("div",gt,[Ct,n("ul",null,[(l(!0),_(m,null,A(e.character.episode.slice(0,5),(r,h)=>(l(),_("li",{key:h},[p(v,{to:`/episode/${t(r)}`,onClick:s},{default:M(()=>[F(f(r),1)]),_:2},1032,["to"])]))),128))])])])],64)}}});const $t=g(yt,[["__scopeId","data-v-1ab16a0d"]]),xt=j(()=>q(()=>import("./Loader.8c51b132.js"),["./Loader.8c51b132.js","./entry.8b140191.js","./Loader.00b8ada3.css"],import.meta.url).then(e=>e.default||e)),It={key:0},kt={class:"card-container"},bt={key:0,class:"not-found"},At=$({__name:"CharacterList",setup(e){const a=w(),t=S(a.isLoading);V(async()=>{await a.fetchCharacters(),t.value=!1});const o=y(()=>a.selectedStatus==="all"?a.characters:a.characters.filter(s=>s.status===a.selectedStatus));return(s,c)=>{const i=xt,v=$t;return l(),_(m,null,[D(t)?(l(),_("div",It,[p(i)])):B("",!0),n("div",kt,[(l(!0),_(m,null,A(o.value,r=>(l(),_("div",{class:"card",key:r.id},[p(v,{character:r},null,8,["character"])]))),128)),o.value.length===0&&!D(a).isLoading?(l(),_("div",bt,"Ничего не найдено")):B("",!0)])],64)}}});const wt=g(At,[["__scopeId","data-v-a31bd75f"]]),Lt={};function Pt(e,a){const t=pt,o=wt;return l(),_(m,null,[p(t),p(o)],64)}const Qt=g(Lt,[["render",Pt]]);export{Qt as default};
